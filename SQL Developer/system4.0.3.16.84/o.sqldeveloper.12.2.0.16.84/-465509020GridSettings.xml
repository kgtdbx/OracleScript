<?xml version = '1.0' encoding = 'UTF-8'?>
<TableSettings class="oracle.dbtools.raptor.controls.grid.RaptorGridPersistedSettings" xmlns="http://xmlns.oracle.com/jdeveloper/110000/Table-attributes">
   <columnPositions class="java.util.ArrayList">
      <Item class="java.lang.String">last active</Item>
      <Item class="java.lang.String">SQL_ID</Item>
      <Item class="java.lang.String">PLAN_HASH_VALUE</Item>
      <Item class="java.lang.String">BASELINE</Item>
      <Item class="java.lang.String">SQL_PROFILE</Item>
      <Item class="java.lang.String">IS_RESOLVED_ADAPTIVE_PLAN</Item>
      <Item class="java.lang.String">Child Num</Item>
      <Item class="java.lang.String">ELAPSED_TIME</Item>
      <Item class="java.lang.String">EXECUTIONS</Item>
      <Item class="java.lang.String">duration (sec)</Item>
      <Item class="java.lang.String">sec per exe</Item>
   </columnPositions>
   <columnWidths>
      <Item>148</Item>
      <Item>142</Item>
      <Item>114</Item>
      <Item>66</Item>
      <Item>86</Item>
      <Item>172</Item>
      <Item>66</Item>
      <Item>92</Item>
      <Item>82</Item>
      <Item>86</Item>
      <Item>75</Item>
   </columnWidths>
   <searchParams class="java.util.ArrayList"/>
   <sortClauses>
      <Item/>
   </sortClauses>
   <uniqueName>IdeConnections%23VHGTEST_SERHIIBwith vs as (select rownum rnum,
                                                                              sid,
                                                                              serial#,
                                                                              status,
                                                                              username,
                                                                              last_call_et,
                                                                              command,
                                                                              machine,
                                                                              osuser,
                                                                              module,
                                                                              action,
                                                                              resource_consumer_group,
                                                                              client_info,
                                                                              client_identifier,
                                                                              type,
                                                                              terminal,
                                                                              sql_id
                                                                         from v$session) 
 ,sql_stmt as (                                                            select /*vs.sid ,serial# serial,*/ vs.sql_id/*, vs.username "Username",
                                                                    case when vs.status = 'ACTIVE' 
                                                                              then last_call_et 
                                                                         else null end "Seconds in Wait",
                                                                    decode(vs.command,  
                                                                     0,null, 
                                                                     1,'CRE TAB', 
                                                                     2,'INSERT', 
                                                                     3,'SELECT', 
                                                                     4,'CRE CLUSTER', 
                                                                     5,'ALT CLUSTER', 
                                                                     6,'UPDATE', 
                                                                     7,'DELETE', 
                                                                     8,'DRP CLUSTER', 
                                                                     9,'CRE INDEX', 
                                                                     10,'DROP INDEX', 
                                                                     11,'ALT INDEX', 
                                                                     12,'DROP TABLE', 
                                                                     13,'CRE SEQ', 
                                                                     14,'ALT SEQ', 
                                                                     15,'ALT TABLE', 
                                                                     16,'DROP SEQ', 
                                                                     17,'GRANT', 
                                                                     18,'REVOKE', 
                                                                     19,'CRE SYN', 
                                                                     20,'DROP SYN', 
                                                                     21,'CRE VIEW', 
                                                                     22,'DROP VIEW', 
                                                                     23,'VAL INDEX', 
                                                                     24,'CRE PROC', 
                                                                     25,'ALT PROC', 
                                                                     26,'LOCK TABLE', 
                                                                     28,'RENAME', 
                                                                     29,'COMMENT', 
                                                                     30,'AUDIT', 
                                                                     31,'NOAUDIT', 
                                                                     32,'CRE DBLINK', 
                                                                     33,'DROP DBLINK', 
                                                                     34,'CRE DB', 
                                                                     35,'ALTER DB', 
                                                                     36,'CRE RBS', 
                                                                     37,'ALT RBS', 
                                                                     38,'DROP RBS', 
                                                                     39,'CRE TBLSPC', 
                                                                     40,'ALT TBLSPC', 
                                                                     41,'DROP TBLSPC', 
                                                                     42,'ALT SESSION', 
                                                                     43,'ALT USER', 
                                                                     44,'COMMIT', 
                                                                     45,'ROLLBACK', 
                                                                     46,'SAVEPOINT', 
                                                                     47,'PL/SQL EXEC', 
                                                                     48,'SET XACTN', 
                                                                     49,'SWITCH LOG', 
                                                                     50,'EXPLAIN', 
                                                                     51,'CRE USER', 
                                                                     52,'CRE ROLE', 
                                                                     53,'DROP USER', 
                                                                     54,'DROP ROLE', 
                                                                     55,'SET ROLE', 
                                                                     56,'CRE SCHEMA', 
                                                                     57,'CRE CTLFILE', 
                                                                     58,'ALTER TRACING', 
                                                                     59,'CRE TRIGGER', 
                                                                     60,'ALT TRIGGER', 
                                                                     61,'DRP TRIGGER', 
                                                                     62,'ANALYZE TAB', 
                                                                     63,'ANALYZE IX', 
                                                                     64,'ANALYZE CLUS', 
                                                                     65,'CRE PROFILE', 
                                                                     66,'DRP PROFILE', 
                                                                     67,'ALT PROFILE', 
                                                                     68,'DRP PROC', 
                                                                     69,'DRP PROC', 
                                                                     70,'ALT RESOURCE', 
                                                                     71,'CRE SNPLOG', 
                                                                     72,'ALT SNPLOG', 
                                                                     73,'DROP SNPLOG', 
                                                                     74,'CREATE SNAP', 
                                                                     75,'ALT SNAP', 
                                                                     76,'DROP SNAP', 
                                                                     79,'ALTER ROLE', 
                                                                     79,'ALTER ROLE', 
                                                                     85,'TRUNC TAB', 
                                                                     86,'TRUNC CLUST', 
                                                                     88,'ALT VIEW', 
                                                                     91,'CRE FUNC', 
                                                                     92,'ALT FUNC', 
                                                                     93,'DROP FUNC', 
                                                                     94,'CRE PKG', 
                                                                     95,'ALT PKG', 
                                                                     96,'DROP PKG', 
                                                                     97,'CRE PKG BODY', 
                                                                     98,'ALT PKG BODY', 
                                                                     99,'DRP PKG BODY', 
                                                                     to_char(vs.command)) "Command",
                                                                    vs.machine "Machine",
                                                                    vs.osuser "OS User", 
                                                                    lower(vs.status) "Status",
                                                                    vs.module "Module",
                                                                    vs.action "Action",
                                                                    vs.resource_consumer_group,
                                                                    vs.client_info,
                                                                    vs.client_identifier*/
                                                                    
                                                               from vs 
                                                              where vs.USERNAME is not null
                                                                and nvl(vs.osuser,'x') &lt;> 'SYSTEM'
                                                                and vs.type &lt;> 'BACKGROUND'
                                                                order by 1)
SELECT TO_CHAR(LAST_ACTIVE_TIME, 'dd.mm.yyyy hh24:mi') "last active",
       SQL_ID,
       PLAN_HASH_VALUE,
       SQL_PLAN_BASELINE "BASELINE", 
       SQL_PROFILE,
       IS_RESOLVED_ADAPTIVE_PLAN,
       CHILD_NUMBER AS "Child Num",
       ELAPSED_TIME,
       EXECUTIONS,
       ROUND(ELAPSED_TIME/1000000) "duration (sec)"
       ,CASE WHEN EXECUTIONS > 0 THEN
        ROUND( (ELAPSED_TIME/EXECUTIONS)/1000000, 1)
        ELSE
            NULL
       END "sec per exe"
FROM V$SQL 
WHERE SQL_ID in (select sql_id from sql_stmt )
ORDER BY LAST_ACTIVE_TIME DESC</uniqueName>
</TableSettings>
